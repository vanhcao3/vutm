/* eslint-disable react-hooks/exhaustive-deps */
import * as turf from "@turf/turf";
import { useEffect, useState } from "react";
import { Layer, Source } from "react-map-gl";
const FOCUS_AREA_1 = [
     [105.51818712551693, 21.008616550690675],
     [105.52404520875757, 21.010154607908333],
     [105.5351206473868, 21.018869965922804],
     [105.5421686537876, 21.02228761434729],
     [105.5496285566644, 21.023611932051296],
     [105.55351869006819, 21.00729209982525],
     [105.55525780852918, 20.998875153469015],
     [105.5539763528198, 20.997080616207384],
     [105.55365598889296, 20.994986962137574],
     [105.53081861750508, 20.99532878521549],
     [105.52779804333471, 20.99549969646185],
     [105.52587585977153, 20.998960607085678],
     [105.52486900171345, 21.002421437468342],
     [105.52139076478949, 21.007505721727924],
     [105.52152806361426, 21.009257409792],
     [105.52358754600408, 21.01002643707946],
     [105.51818712551693, 21.008616550690675],
];

const FOCUS_AREA_2 = [
     [105.49392009172385, 20.965850911227236],
     [105.494558223095, 20.96644679319273],
     [105.49817430087421, 20.967439924524584],
     [105.50125860250716, 20.96932685588257],
     [105.50125860250716, 20.96932685588257],
     [105.50413019368375, 20.975186122498556],
     [105.50402383845449, 20.979158375994416],
     [105.5095543103493, 20.980945855618188],
     [105.5095543103493, 20.980945855618188],
     [105.51114963878149, 20.98074724782724],
     [105.51572291361742, 20.97687434313535],
     [105.51561655839032, 20.975285430123236],
     [105.5165737554492, 20.975484045173587],
     [105.51721188682035, 20.97588127448246],
     [105.5217851616585, 20.974590275367888],
     [105.52338049008841, 20.972405482231338],
     [105.52359320054688, 20.973597191536967],
     [105.52657114695063, 20.9736965002174],
     [105.52933638290023, 20.977966711033062],
     [105.53369694727763, 20.971908933882688],
     [105.52752834400957, 20.968532361371004],
     [105.52348684531773, 20.963169412995526],
     [105.51561655839032, 20.962474201901188],
     [105.51157505969633, 20.962871465779145],
     [105.50476832505706, 20.963864620858004],
     [105.50200308910752, 20.96336804414304],
     [105.50147131296563, 20.96465914017142],
     [105.49774887995716, 20.965552969353524],
     [105.49721710381527, 20.96525502688614],
     [105.49413280218022, 20.965950225052566],
     [105.49392009172385, 20.965850911227236],
];

const ALLOW_FLY_AREAS = [FOCUS_AREA_1, FOCUS_AREA_2];

export const AllowFlyLayer = () => {
     const [sourceDraw, setSourceDraw] = useState<any>(turf.featureCollection([]));

     useEffect(() => {
          const polygonFeatures: any[] = [];

          ALLOW_FLY_AREAS.forEach((area) => {
               polygonFeatures.push(turf.polygon([area]));
          });

          setSourceDraw(turf.featureCollection(polygonFeatures));
     }, [ALLOW_FLY_AREAS]);

     return (
          <>
               <Source type="geojson" data={sourceDraw}>
                    <Layer
                         type="fill"
                         paint={{
                              "fill-color": "green",
                              "fill-opacity": 0.1,
                         }}
                    />

                    <Layer
                         type="line"
                         paint={{ "line-dasharray": [3, 2], "line-color": "green" }}
                    />
               </Source>
          </>
     );
};
